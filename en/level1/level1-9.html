<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
</head>
<style>
@import url('https://fonts.googleapis.com/css?family=Lekton:700&subset=latin-ext');
#preview {
    font-family: Lekton;
    font-size: 12px;
    color: black;
}

#doclist {
    position: absolute;
    height: 100%;
    width: 100%;
    z-index: 2;
}
</style>

<body>
    <div class='customAlert'>
        <p class='message'></p>
        <input type='button' class='confirmButton' value='OK'>
    </div>
    <div class="container-fluid header-top">
        <a href="../index.html"><img class="header_logo img-fluid" src="../img_lessons/100_small1.png"></a>
        <div class="progress-container">
            <ul style="text-align: center;">
                <li>
                    <a href="level1-1.html">1</a>
                </li>
                <li>
                    <a href="level1-2.html">2</a>
                </li>
                <li>
                    <a href="level1-3.html">3</a>
                </li>
                <li>
                    <a href="level1-4.html">4</a>
                </li>
                <li>
                    <a href="level1-5.html">5</a>
                </li>
                <li>
                    <a href="level1-6.html">6</a>
                </li>
                <li>
                    <a href="level1-7.html">7</a>
                </li>
                <li>
                    <a href="level1-8.html">8</a>
                </li>
                <li>
                    <a class="active" href="level1-9.html">9</a>
                </li>
                <li>
                    <a href="level1-10.html">10</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="container-fluid working-space">
        <div class="row" style="padding: 10px;">
            <div class="col-md-5">
                <h4>9. Liudas Mažylis: A Needle in the Berlin Haystack</h4></div>
            <div class=" col-md-7" id="task">The original of the February 16th resolution has been lost in the archive - it must be found. In the archive you received a jumbled text with various document names. 
                <ul>
                    <li> 1) Assemble the text into a list;</li>
                    <li> 2) Find all documents with the 1918 date;</li>
                    <li> 3) Show the list on screen and click on the right document name.</li>
                </ul>
               <!--  <a href="javascript:void(0)" onclick="changeVideo('F-gF4n5ZN7M')">Task Video</a>  -->
            </div>
        </div>
        <div class="row" style="padding: 10px">
            <div class="col  ">
                <div id="preview">
                    <canvas id="canvas" width="490" height="330">
                        This text is displayed if your browser does not support HTML5 Canvas.
                    </canvas>
                    <div id="doclist">
                    </div>
                    <div id="m-background">
                        <div id="m-finished"></div>
                    </div>
                </div>
                <div class="button-panel">
                    <button class="button-run btn btn-lg btn-secondary" onclick="runCode()">Play </button>
                    <div class="hint-panel">
                        <ul> Hint:
                            <li>
                                <a tabindex="0" style="width: 58px;" href="javascript:void(0)" data-toggle="popover" data-placement="top" data-trigger="focus" title="" data-text='You can see all of the document names that need to be put into a tidy list. Notice that punctuation marks are the ones separating the document names.' data-full="../hints/L1T9_H1.png">1</a>
                                <!-- https://drive.google.com/file/d/1Ujv6vNnknaK__rEgzy4afQlTds_trzOR/view -->
                            </li>
                            <li>
                                <a tabindex="0" style="width: 58px;" href="javascript:void(0)" data-toggle="popover" data-placement="top" data-trigger="focus" title="" data-text='The variable is like a labeled box where you can keep your text and numbers. Hold your list and document names in the variable named "documents" - this will ensure you have not lost anything.' data-full="../hints/L1T9_H2.png">2</a>
                                <!-- https://drive.google.com/file/d/1kBehVLz2FRqPzjQpRrwoh-oqidktSkgr/view -->
                            </li>
                            <li>
                                <a tabindex="0" style="width: 58px;" href="javascript:void(0)" data-toggle="popover" data-placement="top" data-trigger="focus" title="" data-text="You must show the sorted document list and click on the name of the document you are searching for. The date of the document will help you find it. " data-full="../hints/L1T9_H3.png">3</a>
                                <!--https://drive.google.com/file/d/1ha81G6vuncZo1qwePjCHZcmGGS5MPruO/view -->
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col" style="padding: 0 ;">
                <div id="blocklyDiv">
                </div>
                <xml id="toolbox" style="display: none">
                    <category name="Text" colour="160">
                        <block type="text">
                        </block>
                        <block type="text">
                            <field name="TEXT"> 1917-07-19. Die Interpretation der Friedensresolution durch Kanzler Michaelis; 1886-12-09. Alfred Lichtwark, Antrittsrede als Direktor der Hamburger Kunsthalle; 2015-11-15. Der weite Weg zur Gleichberechtigung; 1918-08-16. Die Zukunft der baltischen Provinzen: Litauen; 1907-01-01. Die Wahrnehmung der deutschen Außenpolitik in England; 1917-04-07. Wilhelms „Osterbotschaft”; 1919-11-28. Albert Einstein, „Was ist Relativitäts-Theorie?”; 1898-03-06. Ein „ungleicher Vertrag”; 1918-02-16. Die Zukunft der baltischen Provinzen: Litauen; 1917-12-20. Die Zukunft der baltischen Provinzen: Litauen; 2004-04-01. Deutsche Urlaubsgewohnheiten; 1918-10-03. Die erste deutsche Note an Wilson; 1900-09-24. Das Reichsmarineamt und die öffentliche Meinung; 1918-12-01. Die Zukunft der baltischen Provinzen: Litauen; 1917-07-19. Die Friedensresolution des Reichstags</field>
                        </block>
                        <block type="spausdinti"></block>
                    </category>
                    <category name="Lists" colour="260">
                        <block type="list_includes"></block>
                        <block type="lists_split">
                            <value name="DELIM">
                                <shadow type="text">
                                    <field name="TEXT">,</field>
                                </shadow>
                            </value>
                        </block>
                        <!-- <block type="lists_sort"></block> -->
                    </category>
                    <category name="Variables" colour="330">
                        <block type="v_dokumentai"></block>
                        <block type="set_v"></block>
                    </category>
                </xml>
            </div>
            <div class="col-md-3 col-lg-2" style="height: 70vh;">
                <h5>Javascript code: </h5>
                <pre id="content_javascript">
				</pre>
            </div>
        </div>
        <div class="row">
            <div class="logo-row"><img src="../100/logo13.png"><img src="../100/logo12.png"><img src="../100/logo14.png"></div>
        </div>
<!--         <div class="video-modal">
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <iframe id="iframeYoutube" width="100%" height="315" src="https://www.youtube.com/embed/F-gF4n5ZN7M" frameborder="0" allowfullscreen></iframe>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Uždaryti</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <div class="next-modal">
            <div class="modal fade" id="nextModal" tabindex="-1" role="dialog" aria-labelledby="nextModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div>
                                <h3>You found it!</h3>
                            </div>
                            <div class="modal-buttons">
                                <a href="#" class="btn btn-secondary" data-dismiss="modal">Back to task</a>
                                <a href="level1-10.html" class="btn btn-secondary">Next task</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/blockly_compressed.js"></script>
    <script src="../js/javascript_compressed.js"></script>
    <script src="../js/blocks_compressed.js"></script>
    <script src="../msg/js/en.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/mazylis.js"></script>
    <script type="text/javascript">
    var my_canvas = document.getElementById("canvas");
    var ctx = my_canvas.getContext("2d");
    </script>
    <script>
    var workspace = Blockly.inject('blocklyDiv', {
        toolbox: document.getElementById('toolbox'),
        grid: {
            spacing: 20,
            length: 5,
            colour: '#f2f2f2',
            snap: true
        },
        trashcan: true
    });

    function toJavascript(event) {
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        document.getElementById('content_javascript').innerHTML = code;
    }
    workspace.addChangeListener(toJavascript);
    </script>
    <script type="text/javascript">
    function runCode() {
        // Generate JavaScript code and run it.
        // my_canvas.removeEventListener('click', clickReporter, false);
        $('#m-finished').hide();
        $('#doclist').show();
        window.LoopTrap = 1000;
        Blockly.JavaScript.INFINITE_LOOP_TRAP =
            'if (--window.LoopTrap == 0) throw "Infinite loop.";\n';
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
        try {
            if (code.length > 0) {
                eval(code);
            } else {
                alert('Add code block.');
            }

        } catch (e) {
             alert('Error! Please check the blocks.');
        }
    }

    // function clickReporter(e) { /// assign event to some variable

    //     /// adjust mouse click position to be relative to canvas:
    //     var rect = this.getBoundingClientRect(),
    //         x = e.clientX - rect.left,
    //         y = e.clientY - rect.top;
    //     if (x >= 0 && x <= 490 &&
    //         y >= 45 && y <= 65) {
    //         ctx.clearRect(0, 0, canvas.width, canvas.height);
    //         $('#m-finished').show();
    //         setTimeout(function() { $('#nextModal').modal('show'); }, 2000);
    //     }
    // }
    $('#doclist').on("click", "div", function() {
        if ($(' div.' + $(this).attr("class") + ':contains("1918-02-16")').length > 0) {
            $('#m-finished').show();
            $('#doclist').hide();
            setTimeout(function() { $('#nextModal').modal('show'); }, 2000);
        }
    })
    </script>
</body>

</html>