<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
</head>
<style>
@import url('https://fonts.googleapis.com/css?family=Lekton:700&subset=latin-ext');
#preview {
    font-family: Lekton;
    font-size: 12px;
    color: black;
    background-image: url("../img_lessons/basanavicius/dokumentas.png");
    overflow: hidden;
}

#preview_text {
    padding: 22px 40px 10px 25px;
}

#list {
    padding: 8px 40px 10px 25px;
}
</style>
<!-- font-family: 'Lekton', sans-serif; -->

<body>
    <div class='customAlert'>
        <p class='message'></p>
        <input type='button' class='confirmButton' value='OK'>
    </div>
    <div class="container-fluid header-top">
        <a href="../index.html"><img class="header_logo img-fluid" src="../img_lessons/100_small1.png"></a>
        <div class="progress-container">
            <ul style="text-align: center;">
                <li>
                    <a class="active" href="level1-1.html">1</a>
                </li>
                <li>
                    <a href="level1-2.html">2</a>
                </li>
                <li>
                    <a href="level1-3.html">3</a>
                </li>
                <li>
                    <a href="level1-4.html">4</a>
                </li>
                <li>
                    <a href="level1-5.html">5</a>
                </li>
                <li>
                    <a href="level1-6.html">6</a>
                </li>
                <li>
                    <a href="level1-7.html">7</a>
                </li>
                <li>
                    <a href="level1-8.html">8</a>
                </li>
                <li>
                    <a href="level1-9.html">9</a>
                </li>
                <li>
                    <a href="level1-10.html">10</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="container-fluid working-space">
        <div class="row" style="padding: 10px;">
            <div class="col-md-5">
                <h4>1. Jonas Basanavičius:Tangled Words</h4></div>
            <div class=" col-md-7" id="task"> "The Council of Lithuania in its session of February 16, 1918 decided unanimously to address the governments of Russia, Germany, and other states with the following declaration: [...]"
                <br>
This is the beginning of the <b>Act of Reinstating Independence of Lithuania</b>. However, words below got a little bit tangled up. Return the lost lines to their places. On the right side of the screen you will find the code blocks you will need. You will finish the task once the lines are connected in the right order. Press the "Play" button to see if you got your answer. 
                <!-- <a href="javascript:void(0)" onclick="changeVideo('tdYGNqb2zgU')">Task Video</a>  -->
            </div>
        </div>
        <div class="row" style="padding: 10px">
            <div class="col  ">
                <div id="preview">
                    <canvas id="canvas" width="490" height="330">
                        This text is displayed if your browser does not support HTML5 Canvas.
                    </canvas>
                    <div id="preview_text"></div>
                    <div id="list"></div>
                </div>
                <div class="button-panel">
                    <button class="button-run btn btn-lg btn-secondary" onclick="runCode()">Play </button>
                    <div class="hint-panel">
                        <ul> Hint:
                            <li>
                                <a tabindex="0" href="javascript:void(0)" data-toggle="popover" data-placement="top" data-trigger="focus" title="" data-text="Choose the line number and the answer letter." data-full="../hints/L1T1_H1.png">1</a>
                            </li>
                            <li>
                                <a tabindex="0" href="javascript:void(0)" data-toggle="popover" data-placement="top" data-trigger="focus" title="" data-text="Copying is not always bad... Find the declaration text <a href='https://en.wikipedia.org/wiki/Act_of_Independence_of_Lithuania' target='_blank'>here</a>." ">2</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col" style="padding: 0 ;">
                <div id="blocklyDiv">
                </div>
                <xml id="toolbox" style="display: none">
                    <category name="Numbers" colour="230">
                        <block type="math_number"></block>
                    </category>
                    <category name="Text" colour="160">
                        <block type="text1"></block>
                        <block type="text2"></block>
                        <block type="text3"></block>
                    </category>
                    <category name="List" colour="#745CA6">
                        <block type="lists_setIndex">
                            <mutation at="true"></mutation>
                            <field name="MODE">SET</field>
                            <field name="WHERE">FROM_START</field>
                            <value name="LIST">
                                <block type="variables_get">
                                    <field name="VAR" id="agSI/ogyCXtYTJxS:dXL" variabletype="">text</field>
                                </block>
                            </value>
                        </block>
                    </category>
                </xml>
            </div>
            <div class="col-md-3 col-lg-2" style="height: 70vh;">
                <h5>JavaScript code: </h5>
                <pre id="content_javascript">
                </pre>
            </div>
        </div>
        <div class="row">
            <div class="logo-row"><img src="../100/logo13.png"><img src="../100/logo12.png"><img src="../100/logo14.png"></div>
        </div>
<!--         <div class="video-modal">
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <iframe id="iframeYoutube" width="100%" height="315" src="https://www.youtube.com/embed/tdYGNqb2zgU" frameborder="0" allowfullscreen></iframe>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Uždaryti</button>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <div class="next-modal">
            <div class="modal fade" id="nextModal" tabindex="-1" role="dialog" aria-labelledby="nextModalLabel">
                <div class="modal-dialog" role="document">
                   <div class="modal-content">
                        <div class="modal-body">
                            <div>
                                <h3>We’ve got it!</h3>
                            </div>
                            <div class="modal-buttons">
                                <a href="#" class="btn btn-secondary" data-dismiss="modal">Back to task</a>
                                <a href="level1-2.html" class="btn btn-secondary">Next task</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/blockly_compressed.js"></script>
    <script src="../js/javascript_compressed.js"></script>
    <script src="../js/blocks_compressed.js"></script>
    <script src="../msg/js/en.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/sarasai.js"></script>
    <script>
    var workspace = Blockly.inject('blocklyDiv', {
        toolbox: document.getElementById('toolbox'),
        grid: {
            spacing: 20,
            length: 5,
            colour: '#f2f2f2',
            snap: true
        },
        trashcan: true
    });

    // var dom = Blockly.Xml.textToDom('load_custom');
    // console.log(dom);
    // Blockly.Xml.domToWorkspace(dom, workspace);


    function toJavascript(event) {
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        document.getElementById('content_javascript').innerHTML = code;
    }
    workspace.addChangeListener(toJavascript);
    </script>
    <script type="text/javascript">
    var my_canvas = document.getElementById("canvas");
    var ctx = my_canvas.getContext("2d");
    var paper = new Image();
    // paper.src = "../img_lessons/basanavicius/dokumentas.png";
    var basanavicius = new Image();
    basanavicius.src = "../img_lessons/basanavicius/basanavicius.png";


    var text_correct = [];
    text_correct[0] = (1);
    text_correct[1] = (2);
    text_correct[2] = (3);
    var text_old = [];
    var text = [];
    // text_old[0] = " 1._______________" //" Lietuvos Taryba, kaip vienintelė lietuvių tautos atstovybė,";
    // text_old[1] = " remdamos pripažintąja tautų apsisprendimo teise ir lietuvių Vilniaus konferencijos nutarimu rugsėjo mėn. 18-23 d. 1917 metais, skelbia atstatanti nepriklausomą demokratiniais pamatais sutvarkytą Lietuvos valstybę su sostine Vilniuje";
    // text_old[2] = " 2._______________" //" ir tą valstybę atskirianti nuo visų valstybinių ryšių, kurie yra buvę su kitomis tautomis.";
    // text_old[3] = " Drauge Lietuvos Taryba pareiškia, kad Lietuvos valstybės pamatus ir jos santykius su kitomis valstybėmis privalo galutinai nustatyti kiek galima greičiau sušauktas steigiamasis seimas,";
    // text_old[4] = " 3._______________" //" demokratiniu būdu visų jos gyventojų išrinktas.";
    // text_old[5] = " Lietuvos Taryba pranešdama apie tai ....... vyriausybei, prašo pripažinti nepriklausomą Lietuvos valstybę.";
        text_old[0] = " 1.________" //" Lietuvos Taryba, kaip vienintelė lietuvių tautos atstovybė,";
    text_old[1] = " in conformity with the recognized right to national self-determination, and in accordance with the resolution of the Vilnius Conference of September 18-23, 1917 proclaims the restoration of the independent state of Lithuania, founded on democratic principles, with Vilnius as its capital,";
    text_old[2] = " 2.________" //" ir tą valstybę atskirianti nuo visų valstybinių ryšių, kurie yra buvę su kitomis tautomis.";
    text_old[3] = " The Council of Lithuania also declares that the foundation of the Lithuanian State and its relations with other countries will be finally determined by the Constituent Assembly, to be convoked as soon as possible,";
    text_old[4] = " 3.________" //" demokratiniu būdu visų jos gyventojų išrinktas.";
    text_old[5] = " The Council of Lithuania in informing the Government of ....... to this effect kindly requests the recognition of the Independent State of Lithuania.";

       

    var text_short = [];
    // text_short[0] = " Lietuvos Taryba, kaip vienintelė lietuvių tautos atstovybė, "
    // text_short[1] = " ir tą valstybę atskirianti nuo visų valstybinių ryšių, kurie yra buvę su kitomis tautomis."
    // text_short[2] = " demokratiniu būdu visų jos gyventojų išrinktas. "
    text_short[0] = " The Council of Lithuania, as the sole representative of the Lithuanian nation, "
    text_short[1] = " and declares the termination of all state ties which formerly bound this State to other nations."
    text_short[2] = " elected democratically by all its inhabitants. "

    document.getElementById('preview_text').innerHTML = text_old.join("");
    document.getElementById('list').innerHTML = "A. " + text_short[2] + "<br>";
    document.getElementById('list').innerHTML += "B. " + text_short[0] + "<br>";
    document.getElementById('list').innerHTML += "C. " + text_short[1] + "<br>";


    //}

    function runCode() {
        text = [];
        // Generate JavaScript code and run it.

        window.LoopTrap = 1000;
        Blockly.JavaScript.INFINITE_LOOP_TRAP =
            'if (--window.LoopTrap == 0) throw "Infinite loop.";\n';
        var code = 'text = [];';
        code += Blockly.JavaScript.workspaceToCode(workspace);
        Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        //ctx.drawImage(paper, 0, 2);
        // text_old[0] = " 1._______________" //" Lietuvos Taryba, kaip vienintelė lietuvių tautos atstovybė,";
        // text_old[1] = " remdamos pripažintąja tautų apsisprendimo teise ir lietuvių Vilniaus konferencijos nutarimu rugsėjo mėn. 18-23 d. 1917 metais, skelbia atstatanti nepriklausomą demokratiniais pamatais sutvarkytą Lietuvos valstybę su sostine Vilniuje";
        // text_old[2] = " 2._______________" //" ir tą valstybę atskirianti nuo visų valstybinių ryšių, kurie yra buvę su kitomis tautomis.";
        // text_old[3] = " Drauge Lietuvos Taryba pareiškia, kad Lietuvos valstybės pamatus ir jos santykius su kitomis valstybėmis privalo galutinai nustatyti kiek galima greičiau sušauktas steigiamasis seimas,";
        // text_old[4] = " 3._______________" //" demokratiniu būdu visų jos gyventojų išrinktas.";
        // text_old[5] = " Lietuvos Taryba pranešdama apie tai ....... vyriausybei, prašo pripažinti nepriklausomą Lietuvos valstybę.";
                text_old[0] = " 1.________" //" Lietuvos Taryba, kaip vienintelė lietuvių tautos atstovybė,";
    text_old[1] = " in conformity with the recognized right to national self-determination, and in accordance with the resolution of the Vilnius Conference of September 18-23, 1917 proclaims the restoration of the independent state of Lithuania, founded on democratic principles, with Vilnius as its capital,";
    text_old[2] = " 2.________" //" ir tą valstybę atskirianti nuo visų valstybinių ryšių, kurie yra buvę su kitomis tautomis.";
    text_old[3] = " The Council of Lithuania also declares that the foundation of the Lithuanian State and its relations with other countries will be finally determined by the Constituent Assembly, to be convoked as soon as possible,";
    text_old[4] = " 3.________" //" demokratiniu būdu visų jos gyventojų išrinktas.";
    text_old[5] = " The Council of Lithuania in informing the Government of ....... to this effect kindly requests the recognition of the Independent State of Lithuania.";
        try {
            if (code.length > 13) {
                eval(code);

                for (var i = text.length - 1; i >= 0; i--) {
                    if (text[i]) {
                        if (i == 1) { text_old.splice(2, 1, " " + (i + 1) + ". " + text_short[text[i] - 1]); } else if (i == 2) { text_old.splice(4, 1, " " + (i + 1) + ". " + text_short[text[i] - 1]); } else if (i == 0) { text_old.splice(0, 1, " " + (i + 1) + ". " + text_short[text[i] - 1]); }

                    }
                }

                document.getElementById('preview_text').innerHTML = text_old.join("");

                document.getElementById('list').innerHTML = "A. " + text_short[2] + "<br>";
                document.getElementById('list').innerHTML += "B. " + text_short[0] + "<br>";
                document.getElementById('list').innerHTML += "C. " + text_short[1] + "<br>";
                if (JSON.stringify(text_correct) == JSON.stringify(text)) {
                    ctx.drawImage(basanavicius, 138, 0);
                    setTimeout(function() { $('#nextModal').modal('show'); }, 2000);

                } else { alert("Try again"); }

            } else {
                alert('Add code block.');
            }

        } catch (e) {
            alert('Error! Please check the blocks.');
        }
    }
    </script>
</body>

</html>